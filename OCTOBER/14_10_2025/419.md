## Battleships in a Board

**Understand**

You are given a 2D board where each cell is either 'X' (part of a battleship) or '.' (empty).

A battleship is represented by contiguous 'X' cells arranged horizontally or vertically, and there are no adjacent ships (ships are separated by at least one cell of '.').

Your task is to count how many distinct battleships are present on the board.

Example:

Input:

```
X..X
...X
...X
Output: 2
Explanation:
There are two battleships:
- One vertical ship at column 0
- One horizontal ship starting at (0, 3)
```

**Match**

This is a grid traversal and connected components counting problem, similar to counting islands.

Each battleship is a connected group of 'X' cells aligned horizontally or vertically.
We can use DFS to mark all parts of a ship once we find its start, preventing duplicate counting.

**Plan**

Get the grid dimensions ROWS and COLS.

Maintain a visited set to avoid recounting cells.

Define two DFS functions:

horizontal_dfs(r, c): Marks all connected 'X' cells vertically downward.

vertical_dfs(r, c): Marks all connected 'X' cells horizontally rightward.

Iterate through each cell (r, c) in the grid:

If it contains 'X' and hasnâ€™t been visited, increment battle_ships count.

From that cell, run both DFS functions to mark the full ship.

Return the total count.

**Implement**

```py
class Solution:
    def countBattleships(self, board: List[List[str]]) -> int:
        ROWS, COLS = len(board), len(board[0])
        visited = set()
        battle_ships = 0

        def horizontal_dfs(r, c):
            if r >= ROWS or board[r][c] == '.':
                return
            visited.add((r, c))
            horizontal_dfs(r + 1, c)

        def vertical_dfs(r, c):
            if c >= COLS or board[r][c] == '.':
                return
            visited.add((r, c))
            vertical_dfs(r, c + 1)

        for r in range(ROWS):
            for c in range(COLS):
                if board[r][c] == 'X' and (r, c) not in visited:
                    battle_ships += 1
                    horizontal_dfs(r + 1, c)
                    vertical_dfs(r, c + 1)

        return battle_ships
```

**Review**

Uses DFS to traverse contiguous 'X' cells in vertical/horizontal directions.

Ensures no ship part is counted twice using a visited set.

Clear structure and easy to extend to a full 4-directional DFS if needed.

**Evaluate**

Time Complexity: O(R \* C), where R and C are grid dimensions.

Space Complexity: O(R \* C) for recursion and visited tracking.

**Pattern to remember**

For grid-based counting problems (islands, battleships, regions):

Use DFS/BFS to mark contiguous cells of the same type.

Use a visited set or in-place modification to avoid duplicates.

Each DFS/BFS call from an unvisited 'X' or '1' marks one unique structure.
