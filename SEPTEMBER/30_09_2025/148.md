## Sort List

Understand

We are given the head of a singly linked list.

We must return the head of the list sorted in ascending order.

The solution must run in O(n log n) time.

It should use constant space (apart from recursion stack).

```
Example:

Input: head = [4,2,1,3]
Output: [1,2,3,4]
```

**Match**

This is a linked list sorting problem.

Arrays can use quicksort/mergesort with indices, but linked lists are slow for random access.

Merge sort is best:

Splitting list with fast/slow pointers.

Merging two sorted linked lists.

Merge sort works in O(n log n) with O(1) extra space.

**Plan**

Find middle:

Use fast/slow pointers to split list in half.

Divide recursively:

Recursively split until sublist has â‰¤ 1 node.

Merge step:

Merge two sorted sublists with dummy node pointer.

Return merged head.

**Implement**

```py
# Definition for singly-linked list.
# class ListNode:
#     def __init__(self, val=0, next=None):
#         self.val = val
#         self.next = next

class Solution:
    def sortList(self, head: Optional[ListNode]) -> Optional[ListNode]:
        def getMiddle(node):
            slow, fast = node, node.next
            while fast and fast.next:
                slow = slow.next
                fast = fast.next.next
            return slow

        def mergeSortedLists(ListA, ListB):
            dummy = ListNode(0)
            prev, left, right = dummy, ListA, ListB
            while left and right:
                if left.val < right.val:
                    prev.next = left
                    left = left.next
                else:
                    prev.next = right
                    right = right.next
                prev = prev.next
            prev.next = left or right
            return dummy.next

        def divide(cur_node):
            if not cur_node or not cur_node.next:
                return cur_node
            mid = getMiddle(cur_node)
            right = mid.next
            mid.next = None
            list_1 = divide(cur_node)
            list_2 = divide(right)
            return mergeSortedLists(list_1, list_2)

        return divide(head)
```
